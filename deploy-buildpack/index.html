<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
                        Deploying Using a Buildpack &mdash; Deis/Docker Workshop
            </title>        <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,700,600" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/css/bootstrap.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.7.1/modernizr.min.js"></script>
            <link href="/deis-docker-workshop/themes/sculpin/bootstrap-3-blog-theme/assets/css/style.css" rel="stylesheet" media="screen">
    </head>
<body>
                        <header role="banner" class="navbar navbar-default"><div class="container"><div class="navbar-header"><div class="container">
    <a class="navbar-brand" href="/deis-docker-workshop/">
        Deis/Docker Workshop
    </a>
    <a class="brand navbar-right" href="https://developer.akamai.com"><img src="/deis-docker-workshop/images/akamai.png"></a>
</div>
</div></div></header>
                                <div id="main">
        <div id="content">
                
    <div class="container">
    <div class="col-md-9 col-lg-9">
                    
    <article class="hentry" role="article">
              <header>
          <h1 class="entry-title">Deploying Using a Buildpack</h1>
      </header>
  <div class="entry-content"><h2 id="deploying-a-ruby-application">Deploying a Ruby Application</h2>

<p>Now that we have a working Deis cluster, let's see Deis in action by deploying a sample Ruby app.</p>

<p>Clone the Deis <code>example-ruby-sinatra</code> app somewhere:</p>

<pre><code class="sh">$ git clone git@github.com:deis/example-ruby-sinatra.git 
$ cd example-ruby-sinatra
</code></pre>

<p>We then create an app for Deis:</p>

<pre><code class="sh">$ deis create
Creating application... done, created &lt;random&gt;-&lt;words&gt;
Git remote deis added
</code></pre>

<p>This will automatically add the Deis git remote:</p>

<p>We see that there's a new remote for pushing our app:</p>

<pre><code class="sh">$ git remote -v
deis  ssh://git@deis.54.164.177.68.xip.io:2222/&lt;random&gt;-&lt;words&gt;.git (fetch)
deis  ssh://git@deis.54.164.177.68.xip.io:2222/&lt;random&gt;-&lt;words&gt;.git (push)
origin  git@github.com:deis/example-ruby-sinatra.git (fetch)
origin  git@github.com:deis/example-ruby-sinatra.git (push)
</code></pre>

<p>We can then deploy using <code>git push</code>:</p>

<pre><code class="sh">$ git push deis master
Counting objects: 110, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (57/57), done.
Writing objects: 100% (110/110), 23.28 KiB | 0 bytes/s, done.
Total 110 (delta 47), reused 110 (delta 47)
-----&gt; Ruby app detected
-----&gt; Compiling Ruby/Rack
-----&gt; Using Ruby version: ruby-1.9.3
-----&gt; Installing dependencies using 1.7.12
       Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment
       Fetching gem metadata from http://rubygems.org/..........
       Using bundler 1.7.12
       Installing tilt 1.3.6
       Installing rack 1.5.2
       Installing rack-protection 1.5.0
       Installing sinatra 1.4.2
       Your bundle is complete!
       Gems in the groups development and test were not installed.
       It was installed into ./vendor/bundle
       Bundle completed (3.36s)
       Cleaning up the bundler cache.

-----&gt; Discovering process types
       Procfile declares types -&gt; web
       Default process types for Ruby -&gt; rake, console, web
-----&gt; Compiled slug size is 15M

-----&gt; Building Docker image
remote: Sending build context to Docker daemon 15.09 MB
remote: build context to Docker daemon
Step 0 : FROM deis/slugrunner
 ---&gt; 84828c0a7562
Step 1 : RUN mkdir -p /app
 ---&gt; Running in e2ab6a1fd7bb
 ---&gt; 322c62cb1a38
Removing intermediate container e2ab6a1fd7bb
Step 2 : WORKDIR /app
 ---&gt; Running in cb47ac3e4226
 ---&gt; f6c947361212
Removing intermediate container cb47ac3e4226
Step 3 : ENTRYPOINT /runner/init
 ---&gt; Running in b04a7480d20d
 ---&gt; 99d57affda58
Removing intermediate container b04a7480d20d
Step 4 : ADD slug.tgz /app
 ---&gt; 411f6180993a
Removing intermediate container 0966164da96b
Step 5 : ENV GIT_SHA 6b1a9488ac7f37fab78e69b20118d48d6294b8f3
 ---&gt; Running in 8204e135091e
 ---&gt; 9d39bbb4c0a1
Removing intermediate container 8204e135091e
Successfully built 9d39bbb4c0a1
-----&gt; Pushing image to private registry

-----&gt; Launching...
       done, &lt;random&gt;-&lt;words&gt;:v2 deployed to Deis

       http://&lt;random&gt;-&lt;words&gt;.107.23.152.6.xip.io

       To learn more, use `deis help` or visit http://deis.io

To ssh://git@deis.&lt;elb-IP&gt;.xip.io:2222/&lt;random&gt;-&lt;words&gt;.git
 * [new branch]      master -&gt; master
</code></pre>

<p>To verify that it deployed successfully, you can run <code>deis open</code> to pull up
the site in your browser.</p>

<h2 id="deploying-a-php-application">Deploying a PHP Application</h2>

<p>This process is identical to deploying the Ruby application:</p>

<p>Clone the Deis <code>example-php</code> app somewhere:</p>

<pre><code class="sh">$ git clone git@github.com:deis/example-php.git 
$ cd example-php
</code></pre>

<p>We then create an app for Deis:</p>

<pre><code class="sh">$ deis create
Creating application... done, created &lt;random&gt;-&lt;words&gt;
Git remote deis added
</code></pre>

<p>This will automatically add the Deis git remote:</p>

<p>We see that there's a new remote for pushing our app:</p>

<pre><code class="sh">$ git remote -v
deis  ssh://git@deis.54.164.177.68.xip.io:2222/&lt;random&gt;-&lt;words&gt;.git (fetch)
deis  ssh://git@deis.54.164.177.68.xip.io:2222/&lt;random&gt;-&lt;words&gt;.git (push)
origin  git@github.com:deis/example-php.git (fetch)
origin  git@github.com:deis/example-php.git (push)
</code></pre>

<p>We can then deploy using <code>git push</code>:</p>

<pre><code class="sh">$ git push deis master
Counting objects: 218, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (157/157), done.
Writing objects: 100% (218/218), 368.95 KiB | 0 bytes/s, done.
Total 218 (delta 52), reused 218 (delta 52)
-----&gt; PHP app detected
-----&gt; Resolved composer.lock requirement for PHP to version 5.6.4.
-----&gt; Installing system packages...
       - PHP 5.6.4
       - Apache 2.4.10
       - Nginx 1.6.0
-----&gt; Installing PHP extensions...
       - zend-opcache (automatic; bundled)
-----&gt; Installing dependencies...
       Composer version 1.0.0-alpha10 2015-04-14 21:18:51
Loading composer repositories with package information
Installing dependencies from lock file
  - Installing slim/slim (2.6.2)
    Downloading: 100%

Generating optimized autoload files
-----&gt; Preparing runtime environment...
-----&gt; Discovering process types
       Procfile declares types -&gt; web
       Default process types for PHP -&gt; web
-----&gt; Compiled slug size is 72M

-----&gt; Building Docker image
remote: Sending build context to Docker daemon 75.23 MB
remote: build context to Docker daemon
Step 0 : FROM deis/slugrunner
 ---&gt; 84828c0a7562
Step 1 : RUN mkdir -p /app
 ---&gt; Using cache
 ---&gt; 322c62cb1a38
Step 2 : WORKDIR /app
 ---&gt; Using cache
 ---&gt; f6c947361212
Step 3 : ENTRYPOINT /runner/init
 ---&gt; Using cache
 ---&gt; 99d57affda58
Step 4 : ADD slug.tgz /app
 ---&gt; f33397529d55
Removing intermediate container f04e32ac723c
Step 5 : ENV GIT_SHA f6a3d7266ff307c51d7bd7515ae2dca47306104f
 ---&gt; Running in 5e4e398e429c
 ---&gt; 88ae870d4969
Removing intermediate container 5e4e398e429c
Successfully built 88ae870d4969
-----&gt; Pushing image to private registry

-----&gt; Launching...
       done, &lt;random&gt;-&lt;words&gt;:v2 deployed to Deis

       http://&lt;random&gt;-&lt;words&gt;.&lt;elb-IP&gt;.xip.io

       To learn more, use `deis help` or visit http://deis.io

To ssh://git@deis.&lt;elb-IP&gt;.xip.io:2222/&lt;random&gt;-&lt;words&gt;.git
 * [new branch]      master -&gt; master
</code></pre>

<p>To verify that it deployed successfully, you can run <code>deis open</code> to pull up
the site in your browser.</p>
</div>

    </article>

            <nav class="ordered-content">
                            <a class="next" href="/deis-docker-workshop/deploying-applications">&laquo; Deploying Applications</a>
                                        <a class="prev" href="/deis-docker-workshop/deploying-using-a-dockerfile">Deploying Using a Dockerfile &raquo;</a>
                    </nav>
    
            </div>
    <div class="col-md-3 col-lg-3">
        <aside class="sidebar">
            <div class="well sidebar-nav">
    <ul class="nav">
        <li><a href="/deis-docker-workshop/">Get Started</a></li>
                    <li><a href="/deis-docker-workshop/installation">Installation</a></li>
                    <li><a href="/deis-docker-workshop/installing-docker">Installing Docker</a></li>
                    <li><a href="/deis-docker-workshop/installing-deis">Installing Deis</a></li>
                    <li><a href="/deis-docker-workshop/installing-aws-tools">Installing AWS Tools</a></li>
                    <li><a href="/deis-docker-workshop/deploying-to-aws">Deploying to AWS</a></li>
                    <li><a href="/deis-docker-workshop/configuring-dns">Configuring DNS</a></li>
                    <li><a href="/deis-docker-workshop/setting-up-deis">Setting Up Deis</a></li>
                    <li><a href="/deis-docker-workshop/creating-a-user">Creating a User</a></li>
                    <li><a href="/deis-docker-workshop/deploying-applications">Deploying Applications</a></li>
                    <li><a href="/deis-docker-workshop/deploy-buildpack">Deploying Using a Buildpack</a></li>
                    <li><a href="/deis-docker-workshop/deploying-using-a-dockerfile">Deploying Using a Dockerfile</a></li>
                    <li><a href="/deis-docker-workshop/deploying-using-docker-images">Deploying using Docker Images</a></li>
                    <li><a href="/deis-docker-workshop/scaling-containers">Scaling Containers</a></li>
                    <li><a href="/deis-docker-workshop/application-configuration">Application Configuration</a></li>
                    <li><a href="/deis-docker-workshop/managing-releases">Managing Releases</a></li>
                    <li><a href="/deis-docker-workshop/custom-domains">Custom Domains</a></li>
                    <li><a href="/deis-docker-workshop/custom-processes">Custom Processes</a></li>
                    <li><a href="/deis-docker-workshop/tasks">Tasks</a></li>
                    <li><a href="/deis-docker-workshop/cleaning-up">Cleaning Up</a></li>
            </ul>
</div>
        </aside>
    </div>
</div>
        </div>
    </div>
                        <footer role="contentinfo"><div class="container">
    <p>
        <span class="credit">Copyright © <a href="https://daveyshafik.com">Davey Shafik</a> 2015. Licensed under the Apache 2.0 License.</span>
    </p>
</div>
<script type="text/javascript" src="/deis-docker-workshop/components/highlightjs/highlight.pack.js"></script>
<script type="text/javascript">hljs.initHighlightingOnLoad();</script>
<link href="../components/highlightjs/styles/github.css" rel="stylesheet" media="screen">
</footer>
                <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/js/bootstrap.min.js"></script>
</body>
</html>
