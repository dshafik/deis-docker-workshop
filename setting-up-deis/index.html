<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
                        Setting Up Deis &mdash; Deis/Docker Workshop
            </title>        <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,700,600" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/css/bootstrap.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.7.1/modernizr.min.js"></script>
            <link href="/deis-docker-workshop/themes/sculpin/bootstrap-3-blog-theme/assets/css/style.css" rel="stylesheet" media="screen">
    </head>
<body>
                        <header role="banner" class="navbar navbar-default"><div class="container"><div class="navbar-header"><div class="container">
    <a class="navbar-brand" href="/deis-docker-workshop/">
        Deis/Docker Workshop
    </a>
    <a class="brand navbar-right" href="https://developer.akamai.com"><img src="/deis-docker-workshop/images/akamai.png"></a>
</div>
</div></div></header>
                                <div id="main">
        <div id="content">
                
    <div class="container">
    <div class="col-md-9 col-lg-9">
                    
    <article class="hentry" role="article">
              <header>
          <h1 class="entry-title">Setting Up Deis</h1>
      </header>
  <div class="entry-content"><p>Now, we have the a cluster of CoreOS instances and a domain we can use to access the cluster. It's time
to actually setup Deis on the hosts.</p>

<p>We'll need one of the public IPs of our instances (these were output by the provision script). Any
one will do. Then, we set an environment variable so our local <code>deisctl</code> knows who to talk to:</p>

<pre><code class="sh">$ export DEISCTL_TUNNEL=&lt;instance-IP&gt;
</code></pre>

<p>We also provide the SSH key we used to provision the hosts. This is used by the <code>deis run</code> command
to log into the host machine and schedule one-off tasks:</p>

<pre><code class="sh">$ deisctl config platform set sshPrivateKey=~/.ssh/deis-$USER
</code></pre>

<p>Now, we need to have <code>deisctl</code> tell our CoreOS cluster what our domain will be. Note that this is
the domain one level above what the apps will be called (i.e. the domain we set here is
<code>&lt;elb-IP&gt;.xip.io</code>, and our apps will be <code>app-name.&lt;elb-IP&gt;.xip.io</code>).</p>

<pre><code class="console">$ deisctl config platform set domain=&lt;elb-IP&gt;.xip.io
</code></pre>

<p><em>Finally</em>, we can install and start the platform. This will take about 20 minutes for the platform
to fully start, as it's pulling each component's Docker image from Docker Hub.</p>

<pre><code class="console">$ deisctl install platform
$ deisctl start platform
</code></pre>

<p>What exactly did this do? <code>deisctl</code> talked to <a href="https://github.com/coreos/fleet">fleet</a>, the CoreOS cluster scheduler, and asked it to run the Deis components on the cluster. We can use <code>deisctl list</code> to see on which hosts  the components ended up.</p>
</div>

    </article>

            <nav class="ordered-content">
                            <a class="next" href="/deis-docker-workshop/configuring-dns">&laquo; Configuring DNS</a>
                                        <a class="prev" href="/deis-docker-workshop/creating-a-user">Creating a User &raquo;</a>
                    </nav>
    
            </div>
    <div class="col-md-3 col-lg-3">
        <aside class="sidebar">
            <div class="well sidebar-nav">
    <ul class="nav">
        <li><a href="/deis-docker-workshop/">Get Started</a></li>
                    <li><a href="/deis-docker-workshop/installation">Installation</a></li>
                    <li><a href="/deis-docker-workshop/installing-docker">Installing Docker</a></li>
                    <li><a href="/deis-docker-workshop/installing-deis">Installing Deis</a></li>
                    <li><a href="/deis-docker-workshop/installing-aws-tools">Installing AWS Tools</a></li>
                    <li><a href="/deis-docker-workshop/deploying-to-aws">Deploying to AWS</a></li>
                    <li><a href="/deis-docker-workshop/configuring-dns">Configuring DNS</a></li>
                    <li><a href="/deis-docker-workshop/setting-up-deis">Setting Up Deis</a></li>
                    <li><a href="/deis-docker-workshop/creating-a-user">Creating a User</a></li>
                    <li><a href="/deis-docker-workshop/deploying-applications">Deploying Applications</a></li>
                    <li><a href="/deis-docker-workshop/deploy-buildpack">Deploying Using a Buildpack</a></li>
                    <li><a href="/deis-docker-workshop/deploying-using-a-dockerfile">Deploying Using a Dockerfile</a></li>
                    <li><a href="/deis-docker-workshop/deploying-using-docker-images">Deploying using Docker Images</a></li>
                    <li><a href="/deis-docker-workshop/scaling-containers">Scaling Containers</a></li>
                    <li><a href="/deis-docker-workshop/application-configuration">Application Configuration</a></li>
                    <li><a href="/deis-docker-workshop/managing-releases">Managing Releases</a></li>
                    <li><a href="/deis-docker-workshop/custom-domains">Custom Domains</a></li>
                    <li><a href="/deis-docker-workshop/custom-processes">Custom Processes</a></li>
                    <li><a href="/deis-docker-workshop/tasks">Tasks</a></li>
                    <li><a href="/deis-docker-workshop/cleaning-up">Cleaning Up</a></li>
            </ul>
</div>
        </aside>
    </div>
</div>
        </div>
    </div>
                        <footer role="contentinfo"><div class="container">
    <p>
        <span class="credit">Copyright Â© <a href="https://daveyshafik.com">Davey Shafik</a> 2015. Licensed under the Apache 2.0 License.</span>
    </p>
</div>
<script type="text/javascript" src="/deis-docker-workshop/components/highlightjs/highlight.pack.js"></script>
<script type="text/javascript">hljs.initHighlightingOnLoad();</script>
<link href="../components/highlightjs/styles/github.css" rel="stylesheet" media="screen">
</footer>
                <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/js/bootstrap.min.js"></script>
</body>
</html>
