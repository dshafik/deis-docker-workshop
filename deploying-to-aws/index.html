<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
                        Deploying to AWS &mdash; Deis/Docker Workshop
            </title>        <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,700,600" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/css/bootstrap.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.7.1/modernizr.min.js"></script>
            <link href="/deis-docker-workshop/themes/sculpin/bootstrap-3-blog-theme/assets/css/style.css" rel="stylesheet" media="screen">
    </head>
<body>
                        <header role="banner" class="navbar navbar-default"><div class="container"><div class="navbar-header"><div class="container">
    <a class="navbar-brand" href="/deis-docker-workshop/">
        Deis/Docker Workshop
    </a>
    <a class="brand navbar-right" href="https://developer.akamai.com"><img src="/deis-docker-workshop/images/akamai.png"></a>
</div>
</div></div></header>
                                <div id="main">
        <div id="content">
                
    <div class="container">
    <div class="col-md-9 col-lg-9">
                    
    <article class="hentry" role="article">
              <header>
          <h1 class="entry-title">Deploying to AWS</h1>
      </header>
  <div class="entry-content"><p>The Deis project has community-contributed provision scripts for various providers in the deis <code>contrib</code>
directory. These provision scripts provision a cluster of CoreOS machines (3 by default) with some
system tweaks for Deis. We also configure things like EBS volumes and their mount points, install
some helper scripts, etc.</p>

<p>First, we need to tell Deis to use our key. Edit <code>contrib/aws/cloudformation.json</code> to confirm the key:</p>

<pre><code class="javascript">[
    {
        "ParameterKey":     "KeyPair",
        "ParameterValue":   "deis"
    }
]
</code></pre>

<p>We should also add it to our local SSH agent so it's offered when we try to log into the machines:</p>

<pre><code class="sh">$ ssh-add ~/.ssh/deis-$USER
</code></pre>

<p>Generate a new discovery URL and deploy the deis cluster:</p>

<pre><code class="sh">$ make discovery-url
$ cd contrib/aws
$ ./provision-aws-cluster.sh deis
Creating CloudFormation stack deis
{
    "StackId": "arn:aws:cloudformation:us-east-1:69326027886:stack/deis/&lt;UUID&gt;"
}
Waiting for instances to be provisioned (CREATE_IN_PROGRESS, 600s) ...
Waiting for instances to be provisioned (CREATE_IN_PROGRESS, 590s) ...
Waiting for instances to be provisioned (CREATE_COMPLETE, 580s) ...
Waiting for instances to pass initial health checks (600s) ...
Waiting for instances to pass initial health checks (590s) ...
Waiting for instances to pass initial health checks (580s) ...
Instances are available:
&lt;id&gt;  &lt;ip&gt;    &lt;instance type&gt;        &lt;region&gt;      running
&lt;id&gt;  &lt;ip&gt;    &lt;instance type&gt;        &lt;region&gt;      running
&lt;id&gt;  &lt;ip&gt;    &lt;instance type&gt;        &lt;region&gt;      running
Using ELB &lt;elb URL&gt;
Your Deis cluster has been successfully deployed to AWS CloudFormation and is started.
Please continue to follow the instructions in the documentation.
Enabling proxy protocol
1
</code></pre>

<p>At this point you have a CoreOS cluster deployed in AWS CloudFormation.</p>

<blockquote>
  <p><strong>Note:</strong> you may wish to copy down the instance details for future reference</p>
</blockquote>
</div>

    </article>

            <nav class="ordered-content">
                            <a class="next" href="/deis-docker-workshop/installing-aws-tools">&laquo; Installing AWS Tools</a>
                                        <a class="prev" href="/deis-docker-workshop/configuring-dns">Configuring DNS &raquo;</a>
                    </nav>
    
            </div>
    <div class="col-md-3 col-lg-3">
        <aside class="sidebar">
            <div class="well sidebar-nav">
    <ul class="nav">
        <li><a href="/deis-docker-workshop/">Get Started</a></li>
                    <li><a href="/deis-docker-workshop/installation">Installation</a></li>
                    <li><a href="/deis-docker-workshop/installing-docker">Installing Docker</a></li>
                    <li><a href="/deis-docker-workshop/installing-deis">Installing Deis</a></li>
                    <li><a href="/deis-docker-workshop/installing-aws-tools">Installing AWS Tools</a></li>
                    <li><a href="/deis-docker-workshop/deploying-to-aws">Deploying to AWS</a></li>
                    <li><a href="/deis-docker-workshop/configuring-dns">Configuring DNS</a></li>
                    <li><a href="/deis-docker-workshop/setting-up-deis">Setting Up Deis</a></li>
                    <li><a href="/deis-docker-workshop/creating-a-user">Creating a User</a></li>
                    <li><a href="/deis-docker-workshop/deploying-applications">Deploying Applications</a></li>
                    <li><a href="/deis-docker-workshop/deploy-buildpack">Deploying Using a Buildpack</a></li>
                    <li><a href="/deis-docker-workshop/deploying-using-a-dockerfile">Deploying Using a Dockerfile</a></li>
                    <li><a href="/deis-docker-workshop/deploying-using-docker-images">Deploying using Docker Images</a></li>
                    <li><a href="/deis-docker-workshop/scaling-containers">Scaling Containers</a></li>
                    <li><a href="/deis-docker-workshop/application-configuration">Application Configuration</a></li>
                    <li><a href="/deis-docker-workshop/managing-releases">Managing Releases</a></li>
                    <li><a href="/deis-docker-workshop/custom-domains">Custom Domains</a></li>
                    <li><a href="/deis-docker-workshop/custom-processes">Custom Processes</a></li>
                    <li><a href="/deis-docker-workshop/tasks">Tasks</a></li>
                    <li><a href="/deis-docker-workshop/cleaning-up">Cleaning Up</a></li>
            </ul>
</div>
        </aside>
    </div>
</div>
        </div>
    </div>
                        <footer role="contentinfo"><div class="container">
    <p>
        <span class="credit">Copyright Â© <a href="https://daveyshafik.com">Davey Shafik</a> 2015. Licensed under the Apache 2.0 License.</span>
    </p>
</div>
<script type="text/javascript" src="/deis-docker-workshop/components/highlightjs/highlight.pack.js"></script>
<script type="text/javascript">hljs.initHighlightingOnLoad();</script>
<link href="../components/highlightjs/styles/github.css" rel="stylesheet" media="screen">
</footer>
                <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/js/bootstrap.min.js"></script>
</body>
</html>
